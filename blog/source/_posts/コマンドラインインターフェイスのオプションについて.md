---
title: コマンドラインインターフェイスのオプションについて
date: 2020-06-14 12:09:06
tags:
---

コマンドラインでオプションの引数を指定する時に、`半角スペース`と`=`を利用する違いについて気になったので調べました。

## 調査結果
オプションの引数が省略できる場合だと`半角スペース`が、オプション引数を省略した形かコマンドの引数か曖昧なので`=`の指定が必要。

## 詳細内容

コマンドラインアプリケーションごとに違いはありますので `grep` を基準にします。

まずファイルを作成します。
```
cat > test.txt
test
hoge
poyo
poke
111
control+d
```

man grep をすると、--after-context`=`num でnum行分を一致した行以降も表示しれくれるとなっています。
```
-A num, --after-context=num
             Print num lines of trailing context after each match.  See also the -B and -C options.
```
```
~/Desktop ❯❯❯ grep test test.txt --after-context=3
test
hoge
poyo
poke
```
```
~/Desktop ❯❯❯ grep test test.txt --after-context 3
test
hoge
poyo
poke
```
--after-context`=`num 、--after-context` `num のどちらでも受け付けてくれます。

man grep をすると、--colour`=`never で一致した箇所の色付けを消してくれるとなっています。[when]になっているのでオプションの引数は省略できます。
```
--colour=[when, --color=[when]]
             Mark up the matching text with the expression stored in GREP_COLOR environment variable.  The possible
             values of when can be `never', `always' or `auto'.
```

```
~/Desktop ❯❯❯ grep test test.txt --colour=never
test
```

```
~/Desktop ❯❯❯ grep test test.txt --colour never
test.txt:test
grep: never: No such file or directory
```
```
~/Desktop ❯❯❯ grep test --colour test.txt
test
```
--colour`=`never は受け付けてくれますが、--colour` `never はneverがオプションの引数とは認識されずに検索対象のファイル名と認識されました。  
確かにオプションの引数が省略できる場合だとそれが、オプションの引数かコマンドの引数か曖昧なので`=`の指定が必要なことは納得できますね。

## 参考url
http://docopt.org/ : `-o --option` の項目
https://qiita.com/rubytomato@github/items/2ee2fd4127eadc1f1193
https://qiita.com/aosho235/items/0f2b73d08eb645c05208